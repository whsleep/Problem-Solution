# 什么是轨迹优化？

轨迹优化是用于找到最佳轨迹的一系列方法。

以卫星🛰️在两颗行星间的运动为例，包含状态（如位置、速度）和控制（如推力）作为时间的函数；

轨迹优化通常通过选择系统的输入（即控制）作为时间的函数来实现。

## 预定义

$$
\begin{align}
&t_k & \quad节点 k 处时间\\
&N &\quad轨迹（样条）段数\\
&h_k=t_{k+1}-t_k &\quad样条段k的持续时间\\
&x_k=x(t_k) &\quad 节点 k 处状态\\
&u_k=u(t_k) &\quad 节点 k 处控制量\\
&\omega_k=\omega(t_k,x_k,u_k) &\quad 目标函数在节点 k 处被积函数\\
&f_k=f(t_k,x_k,u_k) &\quad 节点 k 处系统运动学方程\\
&\dot{q}=\frac{d}{dt}q,\ddot{q}=\frac{d^2}{st^2}q &\quad q的一阶导和二阶导
\end{align}
$$

在某些情况下，我们将使用下标 $k+\frac{1}{2}$ 来表示样条线段 $k$ 的中点。例如，$u_k$ 给出段 $k$ 开始处的控制，$u_{k+\frac{1}{2}}$ 给出段 $k$ 中点处的控制。

## 简单例子

如何在固定的时间内在两点之间移动一个物块，要求开始和结束时保持静止。

首先需要通过动力学描述物块如何移动

- 将块建模为在一维中移动的点，
- 系统的控制（输入）只是施加在块上的力
- 使用 $x$ 表示位置，$v$ 表示速度，$u$ 表示控制（力）：

$$
\begin{align}
\dot{x}=v,\quad u=\dot{v}
\end{align}
$$

我们希望物块在 $1s$ 内移动指定距离，并且在起点和终点保持静止($v=0$)

所以该问题存在以下边界条件

$$
\begin{align}
x(0)=0,\quad x(1)=1\\
v(0)=0,\quad v(1)=0
\end{align}
$$

如果轨迹优化问题的解满足问题的所有要求（称为约束），则该解被称为 **可行解**。

一般而言，有许多类型的约束。

对于简单的块移动问题，
我们只有两种类型的约束：系统 **运动学** 和 **边界条件**。

轨迹优化涉及找到最佳可行轨迹，也称为 **最优轨迹**，

我们使用一个目标函数来从数学上描述我们所说的 `最佳` 轨迹。

这里使用两个常用的目标函数来解决这个块移动问题：

最小力平方和最小绝对功：

$$
\begin{align}
&\underset{u(t),x(t),v(t)}{\min} \int_0^1u^2(\tau)d\tau\\
&\underset{u(t),x(t),v(t)}{\min} \int_0^1|u(\tau)v(\tau)|d\tau
\end{align}
$$

## 轨迹优化问题

上述系统是连续的